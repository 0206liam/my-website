<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç¶²ç«™ç¸½è¦½</title>

<style>
body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont;
    background: #f2f3f5;
    color: #222;
}

h1 {
    text-align: center;
    margin: 44px 0 32px;
    font-weight: 650;
    font-size: 40px;
    letter-spacing: 1px;
}

#file-list {
    max-width: 1100px;
    margin: auto;
    padding: 0 24px 48px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 18px;
}

.item {
    background: #fff;
    border-radius: 14px;
    padding: 20px;
    text-decoration: none;
    color: #222;
    box-shadow: 0 4px 12px rgba(0,0,0,.08);
    transition: transform .15s, box-shadow .15s;
}

.item:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 22px rgba(0,0,0,.14);
}

.item-title {
    font-size: 20px;
    font-weight: 600;
}

.path {
    font-size: 15px;
    color: #777;
    margin-top: 8px;
}

footer {
    text-align: center;
    padding: 24px;
    font-size: 14px;
    color: #aaa;
}
</style>
</head>

<body>

<h1>ğŸŒ ç¶²ç«™ç¸½è¦½</h1>

<div id="file-list"></div>

<footer>
    Â© 2025 0206liam Â· GitHub Pages
</footer>

<script>
const owner = "0206liam";
const repo = "my-website";
const container = document.getElementById("file-list");

/* å»ºç«‹ä¸€å€‹å¡ç‰‡ */
function createItem(title, href, pathText) {
    const a = document.createElement("a");
    a.href = href;
    a.className = "item";
    a.innerHTML = `
        <div class="item-title">${title}</div>
        <div class="path">${pathText}</div>
    `;
    container.appendChild(a);
}

/* è™•ç†è³‡æ–™å¤¾ */
async function handleFolder(folderPath, folderName) {
    const res = await fetch(
        `https://api.github.com/repos/${owner}/${repo}/contents/${folderPath}`
    );
    const items = await res.json();

    const indexFile = items.find(
        f => f.type === "file" && f.name === "index.html"
    );

    if (indexFile) {
        // æœ‰ index.html â†’ ç•¶è³‡æ–™å¤¾å…¥å£
        createItem(
            "ğŸ“ " + folderName,
            folderPath + "/",
            folderPath + "/"
        );
    } else {
        // æ²’æœ‰ index.html â†’ åˆ—å‡ºè£¡é¢çš„ html
        items.forEach(file => {
            if (
                file.type === "file" &&
                file.name.endsWith(".html")
            ) {
                createItem(
                    file.name.replace(".html", ""),
                    file.path,
                    file.path
                );
            }
        });
    }
}

/* è®€å–æ ¹ç›®éŒ„ */
async function loadRoot() {
    const res = await fetch(
        `https://api.github.com/repos/${owner}/${repo}/contents/`
    );
    const items = await res.json();

    for (const item of items) {

        if (item.type === "dir") {
            await handleFolder(item.path, item.name);
        }

        if (
            item.type === "file" &&
            item.name.endsWith(".html") &&
            item.name !== "index.html"
        ) {
            createItem(
                item.name.replace(".html", ""),
                item.path,
                item.path
            );
        }
    }
}

loadRoot();
</script>

</body>
</html>
